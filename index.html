<!DOCTYPE html>
<!-- Created as an example by https://github.com/mcphee11 Version 2.0 -->
<html>

<head>
  <meta name="robots" content="noindex" />
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title></title>
  <meta name="Template" content="" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Genesys CSS https://spark.genesys.com/ -->
  <link
    href="https://dhqbrvplips7x.cloudfront.net/common-ui-docs/genesys-webcomponents/3.8.1-178/genesys-webcomponents/genesys-webcomponents.css"
    rel="stylesheet" />
  <script type="module"
    src="https://dhqbrvplips7x.cloudfront.net/common-ui-docs/genesys-webcomponents/3.8.1-178/genesys-webcomponents/genesys-webcomponents.esm.js"></script>
  <!-- Genesys SDK info https://developer.genesys.cloud/ -->
  <script src="https://sdk-cdn.mypurecloud.com/javascript/latest/purecloud-platform-client-v2.min.js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>

<body onload="start(); fillTableValues(); hideElements()" style="background-color: white;">

  <gux-badge-beta bold color="yellow">This feature is in BETA</gux-badge-beta>

  <gux-table-beta compact>
    <table slot="data">
      <tbody>
        <tr>
          <td><strong>Customer Provided Details:</strong></td>
          <td></td>
        </tr>
        <tr>
          <td>Customer Name:</td>
          <td id="fullNameCell">No Details Provided</td>
        </tr>
        <tr>
          <td>Date of Birth:</td>
          <td id="dobCell">No Details Provided</td>
        </tr>
        <tr>
          <td>MSN:</td>
          <td id="MSNCell">No Details Provided</td>
        </tr>
        <tr>
          <td>E-Mail:</td>
          <td id="eMailCell">No Details Provided</td>
        </tr>
      </tbody>
    </table>
  </gux-table-beta>



  <p>

    <!-- wrap the buttons and heading in a container -->
  </p>
  <div class="">
    <h2 class="quick-sends__title">Quick Sends</h2>
    <div class="quick-sends__buttons" id="quickSendsButtons">
      <gux-button data-id="cbed3d48-a6a0-4253-ba5b-02ae4f2cf0e7" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>Away Message</span>
      </gux-button>
      <gux-button data-id="20b43db2-df7f-4168-9d95-9d403b70f527" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>2FA + GreenID</span>
      </gux-button>
      <gux-button data-id="ea830f74-c5fb-42b0-bc4b-ef3b5f260c63" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>Hold Message</span>
      </gux-button>
      <gux-button data-id="63da658d-9f7d-4577-8104-8abbd6f53765" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>Wrap Up</span>
      </gux-button>
      <gux-button data-id="7cb2cdc2-f765-4217-8d92-123bf3225b53" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>2FA</span>
      </gux-button>
      <gux-button data-id="9bd4b971-8583-47f9-ac11-0547d6b55bbc" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>Port Number</span>
      </gux-button>
      <gux-button data-id="b443dc07-8d7e-4fb8-a7fa-51dd65888543" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>APN iPhone</span>
      </gux-button>
      <gux-button data-id="163966cd-b8d8-4d07-93cd-9dc9d563de14" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>APN Android</span>
      </gux-button>
      <gux-button data-id="2ee103b1-aa93-420d-bf64-1b46259c34b0" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>How to Activate</span>
      </gux-button>
      <gux-button data-id="5d65b291-1af5-491e-a80a-1d8f64b8bcf2" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>How to Recharge</span>
      </gux-button>
      <gux-button data-id="ae5e2427-9875-4185-9b21-f488e4719ffa" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>Add Extras</span>
      </gux-button>
      <gux-button data-id="ae5e2427-9875-4185-9b21-f488e4719ffa" accent="primary" style="min-width: 150px;">
        <gux-icon icon-name="message-reply"></gux-icon><span>TEST</span>
      </gux-button>

    </div>
    <div class="quick-sends-shadow">
      <div class="quick-sends__filter">
        <h2 class="quick-sends__title">Call Outcome</h2>
        <gux-dropdown filter-type="starts-with" placeholder="Contact Outcome" allow-multiple>
          <gux-listbox aria-label="Countries">
            <gux-option value="Query">Query</gux-option>
            <gux-option value="Escalated">Escalated</gux-option>
            <gux-option value="Resolved">Resolved</gux-option>
            <gux-option value="Unresolved">Unresolved</gux-option>
          </gux-listbox>
        </gux-dropdown>
        <gux-badge-beta id="outcomeBadge" bold color="red">Outcome Not Set</gux-badge-beta>
        </gux-button>
        <div>
          <div class="button-container">
            <gux-button id="external-contact-btn" accent="primary" style="margin-top: 10px;"
              onclick="fetchData(conversationId)">
              <span>Get Previous Interaction Details</span>
            </gux-button>
          </div>
          </gux-button>
          <gux-table-beta compact>
            <table id="conversations-table" slot="data">
              <thead>
                <tr>
                  <th>Media Type</th>
                  <th>Interaction Started</th>
                  <th>Last Wrap Up Code</th>
                  <th>Wrap Up Notes</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </gux-table-beta>
        </div>
      </div>
    </div>


    <script>
      function getUrlParam(paramName) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(paramName);
      }

      function formatDate(dateString) {
        const monthNames = [
          'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
          'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'
        ];

        const date = new Date(dateString);
        const day = date.getDate();
        const monthIndex = date.getMonth();
        const year = date.getFullYear();

        return `${monthNames[monthIndex]} ${day}, ${year}`;
      }

      function fillTableValues() {
        const fullName = getUrlParam('fullName');
        const eMail = getUrlParam('eMail');
        const MSN = getUrlParam('MSN');
        const dob = getUrlParam('dob');

        if (fullName) {
          document.getElementById('fullNameCell').innerText = fullName;
        }
        if (eMail) {
          document.getElementById('eMailCell').innerText = eMail;
        }
        if (MSN) {
          document.getElementById('MSNCell').innerText = MSN;
        }
        if (dob) {
          const formattedDob = formatDate(dob);
          document.getElementById('dobCell').innerText = formattedDob;
        }
      }

      function hideElements() {
  const gc_messageType = getUrlParam('gc_messageType');

  if (gc_messageType !== 'Message') {
    const elementsToHide = [
      document.querySelector('gux-table-beta'),
      document.querySelector('.quick-sends__buttons'),
      document.querySelector('.quick-sends__title')
    ];

    elementsToHide.forEach(element => {
      element.style.display = 'none';
    });
  }
}
    </script>


    <p>Communication ID: <span id="communicationId"></span></p>
    <p>Interaction State: <span id="interactionState"></span></p>
    <p>Conversation ID: <span id="conversationId"></span></p>
    <script src="sendWelcome.js"></script>
    <script src="sendMessage.js"></script>
    <script src="outcome.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>


</body>

</html>